(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{136:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},162:function(e,t,n){},261:function(e,t,n){},304:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),i=n(24),r=n.n(i),c=(n(136),n(2)),s=n.n(c),u=n(3),l=n(19),d=n(41),p=n(15),h=n(6);var j=function(e){return Object(h.jsx)("div",{children:"OOpss ... Not found"})},b=n(17),m=n(28),f=(n(144),function(e){var t=e.loginBtnClick,n=Object(m.c)((function(e){return e.user.current})),a=Object(o.useState)(!1),i=Object(l.a)(a,2),r=i[0],c=i[1],p=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.indexedDB.databases();case 2:e.sent.forEach((function(e){window.indexedDB.deleteDatabase(e.name)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{children:Object(h.jsxs)(b.j,{className:"px-5",color:"light",expand:"md",light:!0,children:[Object(h.jsx)(d.c,{className:"header__link text-decoration-none",to:"/photos",children:"Trang ch\u1ee7"}),Object(h.jsx)(b.k,{onClick:function(){}}),Object(h.jsx)(b.c,{navbar:!0,children:Object(h.jsx)(b.i,{navbar:!0,children:t?Object(h.jsxs)("div",{className:"user__info",children:[Object(h.jsx)("img",{className:"user__info-img",src:n.photoUrl,alt:n.photoUrl}),Object(h.jsxs)("div",{className:"user__info-content",children:[Object(h.jsx)("p",{className:"user__info-content-desc",children:n.name}),Object(h.jsx)("i",{onClick:function(){c(!r)},className:"fas fa-caret-down user__info-content-icon"}),r&&Object(h.jsx)("ul",{className:"user__info-content-list",children:Object(h.jsx)("li",{onClick:p,children:Object(h.jsx)("a",{href:"/photos",children:"\u0110\u0103ng xu\u1ea5t"})})})]})]}):Object(h.jsx)(d.c,{className:"header__link text-decoration-none",to:"/sign-in",children:"\u0110\u0103ng Nh\u1eadp"})})})]})})}),O=(n(145),function(e){var t=e.title,n=e.backgroundUrl,o=n?{backgroundImage:"url(".concat(n,")")}:{};return Object(h.jsx)("section",{className:"banner",style:o,children:Object(h.jsx)("h1",{className:"banner__title",children:t})})}),x={ORANGE_BG:n.p+"static/media/orange-bg.a98c2734.jpg",BLUE_BG:n.p+"static/media/blue-bg.93b683dc.jpg",COLOR_FULL_BG:n.p+"static/media/colorful-bg.95c0fb34.jpg",PINK_BG:n.p+"static/media/pink-bg.d6dafc0a.jpg"};n(146);function g(e){var t=e.photo,n=e.onEditClick,o=e.onRemoveClick;return Object(h.jsxs)("div",{className:"photo mt-5",children:[Object(h.jsx)("img",{src:t.photo,alt:t.title}),Object(h.jsxs)("div",{className:"photo__overlay",children:[Object(h.jsx)("h3",{className:"photo__title",children:t.title}),Object(h.jsxs)("div",{className:"photo__actions",children:[Object(h.jsx)("div",{children:Object(h.jsx)(b.a,{outline:!0,size:"sm",color:"light",onClick:function(){n&&n(t)},children:"Edit"})}),Object(h.jsx)("div",{children:Object(h.jsx)(b.a,{outline:!0,size:"sm",color:"danger",onClick:function(){o&&o(t)},children:"Remove"})})]})]})]})}g.defaultProps={photo:{},onEditClick:null,onRemoveClick:null};var v=g;function y(e){var t=e.photoList,n=e.onPhotoEditClick,o=e.onPhotoRemoveClick;return Object(h.jsx)(b.l,{children:t.map((function(e){return Object(h.jsx)(b.b,{xs:"12",md:"6",lg:"3",children:Object(h.jsx)(v,{photo:e,onEditClick:n,onRemoveClick:o})},e.title)}))})}y.defaultProps={photoList:[],onPhotoEditClick:null,onPhotoRemoveClick:null};var k=y,I=n(36),_=Object(I.c)({name:"photos",initialState:[{id:91176,categoryId:5,photo:"https://picsum.photos/id/532/300/300",title:"Enim laboris dolore consectetur et fugiat do amet eiusmod anim proident do culpa irure consectetur."},{id:82605,categoryId:1,photo:"https://picsum.photos/id/43/300/300",title:"Ad officia magna veniam sunt."},{id:74760,categoryId:3,photo:"https://picsum.photos/id/722/300/300",title:"Minim anim in sunt esse nisi sit magna consequat in sit laboris adipisicing."},{id:39588,categoryId:5,photo:"https://picsum.photos/id/294/300/300",title:"Deserunt in tempor est id consectetur cupidatat."},{id:72133,categoryId:4,photo:"https://picsum.photos/id/229/300/300",title:"Labore culpa velit sunt sit anim ad do veniam do proident sunt et nisi mollit."},{id:95333,categoryId:1,photo:"https://picsum.photos/id/862/300/300",title:"Fugiat fugiat voluptate tempor minim ipsum nisi culpa magna officia ea deserunt tempor."},{id:62419,categoryId:3,photo:"https://picsum.photos/id/515/300/300",title:"Excepteur nisi aliquip ex aliqua consectetur id laboris cillum elit dolor dolor anim sint."},{id:12569,categoryId:5,photo:"https://picsum.photos/id/730/300/300",title:"Occaecat exercitation Lorem cupidatat adipisicing elit duis consequat esse et tempor eu enim cupidatat."},{id:47434,categoryId:3,photo:"https://picsum.photos/id/287/300/300",title:"Veniam officia est nulla proident labore."},{id:52685,categoryId:3,photo:"https://picsum.photos/id/859/300/300",title:"Ut incididunt do magna culpa consectetur id deserunt et enim elit quis."},{id:69928,categoryId:5,photo:"https://picsum.photos/id/110/300/300",title:"Nisi velit fugiat voluptate fugiat magna officia qui fugiat ad non."},{id:86160,categoryId:5,photo:"https://picsum.photos/id/649/300/300",title:"Id ex enim non dolore reprehenderit eu ullamco."}],reducers:{addPhoto:function(e,t){e.push(t.payload)},removePhoto:function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))},updatePhoto:function(e,t){var n=t.payload,o=e.findIndex((function(e){return e.id===n.id}));o>=0&&(e[o]=n)}}}),N=_.reducer,P=_.actions,C=P.addPhoto,w=P.removePhoto,B=P.updatePhoto,U=N,R=function(){var e=Object(m.c)((function(e){return e.photos})),t=Object(m.b)(),n=Object(p.g)();return Object(h.jsxs)("div",{className:"photo-main",children:[Object(h.jsx)(O,{title:"Your awesome photos",backgroundUrl:x.PINK_BG}),Object(h.jsxs)(b.d,{className:"text-center",children:[Object(h.jsx)(d.b,{className:"d-block mt-3 text-decoration-none",to:"/photos/add",children:"Add new photo"}),Object(h.jsx)(k,{photoList:e,onPhotoEditClick:function(e){var t="/photos/add/".concat(e.id);n(t)},onPhotoRemoveClick:function(e){t(w(e.id))}})]})]})},S=[{value:1,label:"Technology"},{value:2,label:"Education"},{value:3,label:"Nature"},{value:4,label:"Animals"},{value:5,label:"Styles"}],E=n(29),A=n(48),T=function(e){var t=e.field,n=e.form,o=e.type,a=e.label,i=e.placeholder,r=t.name,c=n.errors,s=n.touched,u=c[r]&&s[r];return Object(h.jsxs)(b.f,{children:[a&&Object(h.jsxs)(b.h,{for:r,children:[" ",a," "]}),Object(h.jsx)(b.g,Object(A.a)(Object(A.a)({id:r},t),{},{type:o,disable:"false",placeholder:i,invalid:u})),Object(h.jsx)(E.a,{name:r,component:b.e})]})};T.defaultProps={type:"text",label:"",placeholder:""};var L=T,q=n(129),F=(n(147),function(e){var t=e.field,n=e.form,o=e.options,a=e.label,i=e.placeholder,r=t.name,c=t.value,s=n.errors,u=n.touched,l=s[r]&&u[r],d=o.filter((function(e){return e.value===c}));return Object(h.jsxs)(b.f,{children:[a&&Object(h.jsxs)(b.h,{for:r,children:[" ",a," "]}),Object(h.jsx)(q.a,Object(A.a)(Object(A.a)({className:l&&"is-invalid valid-selected",id:r},t),{},{value:d,onChange:function(e){var n=e?e.value:e,o={target:{name:r,value:n}};t.onChange(o)},placeholder:i,options:o})),l&&Object(h.jsx)(E.a,{name:r,component:b.e})]})});F.apply.defaultProps={label:"",placeholder:"",options:[]};var D=F,M=n(0),z=(n(162),function(){var e=Math.floor(1e3*Math.random());return"https://picsum.photos/id/".concat(e,"/300/300")}),G=function(e){var t=e.name,n=e.imageUrl,o=e.onImageUrlChange,a=e.onRandomButtonBlur,i=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&(t=z(),o(t));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"random-photo",children:[Object(h.jsx)("div",{className:"random-photo__button",children:Object(h.jsx)(b.a,{outline:!0,name:t,color:"primary",onBlur:a,onClick:i,children:"Random a photo"})}),Object(h.jsx)("div",{className:"random-photo__photo mt-3",children:n&&Object(h.jsx)("img",{src:n,alt:"OOps ... not found.Please click random again",onError:function(e){return e.target.src=i()}})})]})};G.prototype={name:M.PropTypes.string,imageUrl:M.PropTypes.string,onImageUrlChange:M.PropTypes.func,onRandomButtonBlur:M.PropTypes.func},G.defaultProps={name:"",imageUrl:"",onImageUrlChange:null,onRandomButtonBlur:null};var V=G,K=function(e){var t=e.field,n=e.form,o=e.label,a=t.name,i=t.value,r=t.onBlur,c=n.errors,s=n.touched,u=c[a]&&s[a];return Object(h.jsxs)(b.f,{children:[o&&Object(h.jsxs)(b.h,{for:a,children:[" ",o," "]}),Object(h.jsx)(V,{name:a,imageUrl:i,onImageUrlChange:function(e){n.setFieldValue(a,e)},onRandomButtonBlur:r}),Object(h.jsx)("div",{className:u&&"is-invalid"}),u&&Object(h.jsx)(E.a,{name:a,component:b.e})]})};K.defaultProps={label:""};var J=K,W=n(46),Y=function(e){var t=e.initialValues,n=W.b().shape({title:W.c().required("This field is required"),categoryId:W.a().required("This is field is required").nullable(),photo:W.c().when("categoryId",{is:1,then:W.c().required("This is field is required"),otherwise:W.c().notRequired()})});return Object(h.jsx)("div",{children:Object(h.jsx)(E.d,{initialValues:t,validationSchema:n,onSubmit:e.onSubmit,children:function(t){var n=t.isSubmitting;return Object(h.jsxs)(E.c,{children:[Object(h.jsx)(E.b,{name:"title",component:L,label:"Title",placeholder:"Eg: Wow nature ..."}),Object(h.jsx)(E.b,{name:"categoryId",component:D,label:"Category",placeholder:"What's your photo category?",options:S}),Object(h.jsx)(E.b,{name:"photo",component:J,label:"Photo"}),Object(h.jsx)(b.f,{children:Object(h.jsxs)(b.a,{type:"submit",color:e.isAddMode?"primary":"success",children:[n&&Object(h.jsx)(b.m,{size:"sm"}),e.isAddMode?"Add to album":"Update your photo"]})})]})}})})};Y.defaultProps={onSubmit:null};var Q=Y,Z=(n(261),function(){var e=Object(m.b)(),t=Object(p.g)(),n=Object(p.h)().photoId,o=!n,a=Object(m.c)((function(e){return e.photos.find((function(e){return e.id===+n}))})),i=o?{title:"",categoryId:null,photo:""}:a;return Object(h.jsxs)("div",{className:"photo-edit",children:[Object(h.jsx)(O,{title:"Pick your amazing photo"}),Object(h.jsx)("div",{className:"photo-edit_form",children:Object(h.jsx)(Q,{isAddMode:o,initialValues:i,onSubmit:function(n){return new Promise((function(a){setTimeout((function(){o?e(C(n)):(e(B(n)),t("/photos"),a(!0))}),2e3)}))}})})]})}),H=n(125),X=n.n(H),$=n(126),ee=n.n($),te=n(12),ne=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=te.a.auth().currentUser)){e.next=3;break}return e.abrupt("return",t.getIdToken());case 3:if("firebase:host:notereact-bb3bb-default-rtdb.firebaseio.com",localStorage.getItem("firebase:host:notereact-bb3bb-default-rtdb.firebaseio.com")){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",new Promise((function(e,t){var n=te.a.auth().onAuthStateChanged(function(){var o=Object(u.a)(s.a.mark((function o(a){var i,r;return s.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=setTimeout((function(){t(null)}),1e4),a||t(null),o.next=4,a.getIdToken();case 4:r=o.sent,e(r),n(),clearTimeout(i);case 8:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}())})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=X.a.create({baseURL:"https://js-post-api.herokuapp.com/api",headers:{"content-type":"application/json"},paramsSerializer:function(e){return ee.a.stringify(e)}});oe.interceptors.request.use(function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:return(n=e.sent)&&(t.headers.Authorization="Bearer ".concat(n)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),oe.interceptors.response.use((function(e){return e&&e.data?e.data:e}),(function(e){throw e}));var ae,ie=oe,re={getAll:function(e){return ie.get("/products",{params:e})},get:function(e){var t="products/".concat(e);return ie.get(t)}},ce=n(127),se=(n(81),{signInFlow:"redirect",signInSuccessUrl:"/photos",signInOptions:[te.a.auth.GoogleAuthProvider.PROVIDER_ID,te.a.auth.FacebookAuthProvider.PROVIDER_ID]}),ue=function(){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"text-center",children:[Object(h.jsx)("h2",{children:"Login"}),Object(h.jsx)("p",{children:"or login with social accounts"})]}),Object(h.jsx)("div",{children:Object(h.jsx)(ce.StyledFirebaseAuth,{uiConfig:se,firebaseAuth:te.a.auth()})})]})},le=n(4),de={getMe:function(){return new Promise((function(e,t){setTimeout((function(){var t=te.a.auth().currentUser;e({id:t.uid,name:t.displayName,email:t.email,photoUrl:t.photoURL})}),500)}))}},pe=Object(I.b)("user/getMe",function(){var e=Object(u.a)(s.a.mark((function e(t,n){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.getMe();case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),he=Object(I.c)({name:"user",initialState:{current:{},loading:!1,error:""},reducers:{},extraReducers:(ae={},Object(le.a)(ae,pe.pending,(function(e){e.loading=!0})),Object(le.a)(ae,pe.rejected,(function(e,t){e.loading=!1,e.error=t.payload})),Object(le.a)(ae,pe.fulfilled,(function(e,t){e.loading=!1,e.current=t.payload})),ae)}).reducer;te.a.initializeApp({apiKey:"AIzaSyCN9u-DNW7c3Q1q3mJeYLEjCV-I6GmKZ9k",authDomain:"react-photo-app-30aa9.firebaseapp.com"});var je=function(){var e=Object(o.useState)([]),t=Object(l.a)(e,2),n=(t[0],t[1]),a=Object(o.useState)(!1),i=Object(l.a)(a,2),r=i[0],c=i[1],b=Object(m.b)();return Object(o.useEffect)((function(){(function(){var e=Object(u.a)(s.a.mark((function e(){var t,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={_page:1,_limit:10},e.next=4,re.getAll(t);case 4:o=e.sent,n(o.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Failed to fetch product list",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(o.useEffect)((function(){var e=te.a.auth().onAuthStateChanged(function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.log("User is not login"),e.abrupt("return");case 3:return e.prev=3,e.next=6,b(pe());case 6:n=e.sent,Object(I.d)(n),c(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("Failed to login: ",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]),Object(h.jsx)("div",{className:"photo-app",children:Object(h.jsx)(o.Suspense,{fallback:Object(h.jsx)("div",{children:"Loading..."}),children:Object(h.jsxs)(d.a,{children:[Object(h.jsx)(f,{loginBtnClick:r}),Object(h.jsxs)(p.d,{children:[Object(h.jsx)(p.b,{path:"photos",element:Object(h.jsx)(R,{})}),Object(h.jsx)(p.b,{path:"photos/add",element:Object(h.jsx)(Z,{}),children:Object(h.jsx)(p.b,{path:":photoId",element:Object(h.jsx)(p.a,{})})}),Object(h.jsx)(p.b,{path:"/sign-in",element:Object(h.jsx)(ue,{})}),Object(h.jsx)(p.b,{element:Object(h.jsx)(j,{})})]})]})})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,311)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),i(e),r(e)}))},me={photos:U,user:he},fe=Object(I.a)({reducer:me});r.a.render(Object(h.jsx)(m.a,{store:fe,children:Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(je,{})})}),document.getElementById("root")),be()}},[[304,1,2]]]);
//# sourceMappingURL=main.fc71f0bc.chunk.js.map